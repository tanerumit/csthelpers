% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calculate_eflow_metrics_old.R
\name{calculate_eflow_metrics_old}
\alias{calculate_eflow_metrics_old}
\title{Calculate Environmental Flow (E-flow) Hydrologic Metrics}
\usage{
calculate_eflow_metrics_old(
  Q,
  date,
  high_thresh_quantile = 0.9,
  low_thresh_quantile = 0.1,
  zero_thresh_quantile = 0.02
)
}
\arguments{
\item{Q}{Numeric vector or matrix/data.frame of daily discharge values.
If a vector, a single site is processed. If a matrix/data.frame, each
column is treated as a separate site.}

\item{date}{Vector of corresponding dates (`Date` or coercible). Length
must match the number of rows in `Q`.}

\item{high_thresh_quantile}{Quantile used to define high-flow pulse
threshold. Default: `0.9`.}

\item{low_thresh_quantile}{Quantile used to define low-flow pulse
threshold. Default: `0.1`.}

\item{zero_thresh_quantile}{Quantile defining the "near-zero" threshold
used for IF (intermittency) metrics. Default: `0.02`.}
}
\value{
A tibble containing:
  \itemize{
    \item site (if multi-site)
    \item metric_id
    \item group (HF, MF, LF, RFC, IF)
    \item metric (short indicator name)
    \item value (numeric)
  }
}
\description{
Computes 70 eco-hydrological indicators describing magnitude, timing,
frequency, rate of change, and intermittency/zero-flow characteristics of
discharge time-series. Supports both single-site and multi-site input.
}
\details{
For each site, the function:
\itemize{
  \item Derives 35 yearly metrics (magnitude, timing, pulses,
        rate of change, zero-flow).
  \item Aggregates them to median (`*_m`) and IQR (`*_v`) across years.
  \item Returns a tidy table with 70 indicators grouped into HF, MF, LF,
        RFC, IF.
}

IF-group metrics (zero-flow count, duration, timing) use flows
\eqn{Q \le \text{quantile}(Q, zero\_thresh\_quantile)} rather than Q == 0.
}
\examples{
\dontrun{
set.seed(123)
d <- seq.Date(as.Date("1990-01-01"), as.Date("2010-12-31"), by="day")
Q <- pmax(0, 30 + 10*sin(2*pi*(1:length(d))/365) + rnorm(length(d), 0, 3))

res <- calculate_eflow_metrics(Q, d, zero_thresh_quantile = 0.02)
head(res)
}

}
