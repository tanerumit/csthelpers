% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/weighted_impacts.R
\name{compute_weighted_impacts}
\alias{compute_weighted_impacts}
\title{Compute Weighted Impacts Across Climate Scenarios}
\usage{
compute_weighted_impacts(
  scenario_weights,
  impact_data,
  scenario_cols = list(scenario_id = "strid", realization = "rlz", scenario = "scenario",
    weight = "weight"),
  impact_cols = list(scenario_id = "strid", location = NULL, value = "value"),
  realization_agg_fn = stats::median,
  return_detail = FALSE
)
}
\arguments{
\item{scenario_weights}{Data frame combining scenario realizations with their
climate-based weights. Must contain columns for scenario ID, realization,
climate variables (ta, pr), scenario grouping, and weight.}

\item{impact_data}{Data frame in long format with impact values. Must contain
scenario ID and value columns, optionally a location column.}

\item{scenario_cols}{Named list specifying columns in `scenario_weights`:
\describe{
  \item{scenario_id}{Links to impact_data (default: "strid")}
  \item{realization}{Realization/ensemble member (default: "rlz")}
  \item{scenario}{Scenario grouping column(s), NULL for single scenario,
    or character vector for multiple (default: "scenario")}
  \item{weight}{Weight column (default: "weight")}
}}

\item{impact_cols}{Named list specifying columns in `impact_data`:
\describe{
  \item{scenario_id}{Links to scenario_weights (default: "strid")}
  \item{location}{Location/site column, or NULL for single location (default: NULL)}
  \item{value}{Impact value column (default: "value")}
}}

\item{realization_agg_fn}{Function to aggregate across realizations (default: median).}

\item{return_detail}{Logical; if TRUE, also returns per-realization results.}
}
\value{
Data frame with weighted impacts per scenario (and location if provided).
  If `return_detail = TRUE`, returns a list with `summary` and `by_realization`.
}
\description{
Computes weighted impact summaries by joining scenario weights to impact data
and aggregating across realizations.
}
\examples{
\dontrun{
# Basic usage with defaults
result <- compute_weighted_impacts(
  scenario_weights = my_scenario_weights,
  impact_data = my_impacts
)

# Custom column names
result <- compute_weighted_impacts(
  scenario_weights = my_scenario_weights,
  impact_data = my_impacts,
  scenario_cols = list(
    scenario_id = "run_id",
    realization = "member",
    scenario = c("ssp", "gcm"),
    weight = "w"
  ),
  impact_cols = list(
    scenario_id = "run_id",
    location = "gauge",
    value = "discharge"
  )
)
}

}
