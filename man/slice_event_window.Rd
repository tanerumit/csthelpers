% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/slice_event_window.R
\name{slice_event_window}
\alias{slice_event_window}
\title{Slice Fixed-Length Event-Based Windows from a Timeline}
\usage{
slice_event_window(
  events,
  timeline,
  days.before = 365,
  total.days = 5 * 365,
  month.start = 1
)
}
\arguments{
\item{events}{A `Date` vector or list of `Date` vectors. Each vector
represents one event sequence (e.g., drought period, extreme spell).}

\item{timeline}{A `Date` vector defining the complete historical range
from which windows are extracted.}

\item{days.before}{Integer. Number of days before the last event used to
estimate the target year from which the slice will start.
(This does *not* affect window length.)}

\item{total.days}{Integer. Total length of the extracted window. The output
window is always exactly this long, assuming `timeline` is long enough.}

\item{month.start}{Integer (1â€“12). Month of the year on which each window
starts (always day 1 of that month). For example, `1` = January 1,
`6` = June 1.}
}
\value{
A vector of indices (if a single event is provided) or a list of
  equal-length index vectors (if multiple event sets are provided).
}
\description{
For each event set:
\enumerate{
  \item Identify the last event date.
  \item Subtract `days.before` to estimate a reference year.
  \item Clamp this year to the range of valid years in which a full
        `total.days` window can fit inside `timeline`.
  \item Construct a window starting at `month.start`-01 of that year.
  \item Extend the window for `total.days` days.
  \item Return the indices of `timeline` that fall inside that window.
}
All windows are forced to equal length. If a single event vector is
provided, a single index vector is returned. If a list of event vectors
is provided, a list of index vectors is returned.
}
\details{
Constructs fixed-duration weather/climate windows anchored to a specified
start month and aligned with the year associated with each event sequence.
The window always spans exactly `total.days` days and is guaranteed to fit
fully within the provided `timeline`. This is useful for generating
scenario-based weather slices (e.g., for hydrology, climate stress-testing,
drought analysis, or impact models) where each slice begins on the same
calendar boundary (e.g., January 1, June 1) regardless of actual event dates.
}
\examples{
# Example: extract 5-year windows starting January 1
ev  <- as.Date(c("1980-03-10", "1980-06-12"))
tl  <- seq.Date(as.Date("1980-01-01"), as.Date("2010-12-31"), by = "day")

idx <- slice_event_window(
  events      = ev,
  timeline    = tl,
  days.before = 2 * 365,
  total.days  = 5 * 365,
  month.start = 1
)

# Access the actual slice
tl[idx]

}
