% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/compute_weights_genealogy.R
\name{compute_weights_genealogy}
\alias{compute_weights_genealogy}
\title{Compute genealogy-based model weights per SSP based on Kuma et al. 2023.}
\usage{
compute_weights_genealogy(
  gcm_data,
  kuma_table,
  model_col = "model",
  scenario_col = "scenario",
  cmip_phase = c("CMIP6", "CMIP5", "CMIP3"),
  method = c("family", "family_sqrt", "independence"),
  keep_original_model = TRUE,
  verbose = TRUE
)
}
\arguments{
\item{gcm_data}{data.frame with at least model and scenario columns.}

\item{kuma_table}{data.frame read from Kuma et al. CSV (Table S1).}

\item{model_col}{Name of model column in `gcm_data`. Default "model".}

\item{scenario_col}{Name of SSP/scenario column in `gcm_data`. Default "scenario".}

\item{cmip_phase}{Which name column to use for mapping. One of "CMIP6", "CMIP5", "CMIP3".
Default "CMIP6".}

\item{method}{Weighting method. One of:
- "family" (default): Equal weight per family
- "family_sqrt": Weight proportional to 1/sqrt(n_models_in_family)
- "independence": Ignore genealogy (equal weight per model)}

\item{keep_original_model}{Logical. If TRUE, keep original model string and add a cleaned model field.}

\item{verbose}{Logical. If TRUE, prints a short mapping/coverage summary.}
}
\value{
`gcm_data` with added columns:
- model_clean: cleaned CMIP model name used for mapping
- model_family: genealogy family (from Kuma table; fallback to model_clean if unmatched)
- w_genealogy: per-row weight within scenario_col; sums to 1 per scenario
}
\description{
Computes relative weights for models within each SSP scenario using the
genealogy information from Kuma et al. (2023) supplemental Table S1.

Default method ("family") gives each genealogy family equal total weight
within each SSP, then splits that family weight equally among models from
that family present in that SSP. If multiple rows per model exist (e.g.,
different ensemble members/variants), the model weight is split equally
across those rows.
}
